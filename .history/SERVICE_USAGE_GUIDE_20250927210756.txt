========================================
HÆ¯á»šNG DáºªN Sá»¬ Dá»¤NG CÃC SERVICE CLASS
========================================

Sau khi refactor, dá»± Ã¡n Ä‘Ã£ Ä‘Æ°á»£c chia thÃ nh 6 service class chÃ­nh:

========================================
1ï¸âƒ£ LOCATIONSERVICE.CS
========================================

ğŸ“Œ Chá»©c nÄƒng: Quáº£n lÃ½ Ä‘á»‹a Ä‘iá»ƒm, tÃ¬m kiáº¿m, lÆ°u trá»¯
ğŸ“Œ Vá»‹ trÃ­: LocationService.cs

ğŸ”§ CÃ¡c method chÃ­nh:
- SaveLocation(string name, double lat, double lon) - LÆ°u Ä‘á»‹a Ä‘iá»ƒm
- SaveLocationSilent(string name, double lat, double lon) - LÆ°u Ä‘á»‹a Ä‘iá»ƒm tá»± Ä‘á»™ng
- SearchLocationAsync(string searchTerm) - TÃ¬m kiáº¿m Ä‘á»‹a Ä‘iá»ƒm
- GetCurrentLocationAsync() - Láº¥y vá»‹ trÃ­ hiá»‡n táº¡i
- GetSavedLocations() - Láº¥y danh sÃ¡ch Ä‘á»‹a Ä‘iá»ƒm Ä‘Ã£ lÆ°u
- SaveLocationsToFile() - LÆ°u vÃ o file txt
- LoadLocationsFromFile() - Äá»c tá»« file txt

ğŸ’¡ CÃ¡ch sá»­ dá»¥ng:
```csharp
var locationService = new LocationService();

// TÃ¬m kiáº¿m Ä‘á»‹a Ä‘iá»ƒm
var result = await locationService.SearchLocationAsync("HÃ  Ná»™i");
if (result.success)
{
    // Sá»­ dá»¥ng result.location, result.lat, result.lon, result.weatherData
}

// LÆ°u Ä‘á»‹a Ä‘iá»ƒm
locationService.SaveLocation("HÃ  Ná»™i", 21.0285, 105.8542);

// Láº¥y danh sÃ¡ch Ä‘á»‹a Ä‘iá»ƒm Ä‘Ã£ lÆ°u
var savedLocations = locationService.GetSavedLocations();
```

========================================
2ï¸âƒ£ WEATHERDISPLAYSERVICE.CS
========================================

ğŸ“Œ Chá»©c nÄƒng: Hiá»ƒn thá»‹ thÃ´ng tin thá»i tiáº¿t
ğŸ“Œ Vá»‹ trÃ­: WeatherDisplayService.cs

ğŸ”§ CÃ¡c method chÃ­nh:
- DisplayWeatherInfo() - Hiá»ƒn thá»‹ thÃ´ng tin thá»i tiáº¿t chÃ­nh
- UpdateWeatherDisplay() - Cáº­p nháº­t hiá»ƒn thá»‹ khi Ä‘á»•i Ä‘Æ¡n vá»‹
- UpdateDetailPanelFromApi() - Cáº­p nháº­t panel chi tiáº¿t
- CreateDetailPanelContent() - Táº¡o ná»™i dung panel chi tiáº¿t

ğŸ’¡ CÃ¡ch sá»­ dá»¥ng:
```csharp
var weatherDisplayService = new WeatherDisplayService();

// Hiá»ƒn thá»‹ thÃ´ng tin thá»i tiáº¿t
weatherDisplayService.DisplayWeatherInfo(
    "HÃ  Ná»™i", 
    weatherData, 
    true, // isCelsius
    lblLocation, 
    lblTime, 
    lblTemperature, 
    lblStatus, 
    picWeatherIcon, 
    detailPanel
);

// Cáº­p nháº­t panel chi tiáº¿t
weatherDisplayService.UpdateDetailPanelFromApi(
    currentWeather, 
    "Â°C", 
    detailPanel
);
```

========================================
3ï¸âƒ£ FORECASTSERVICE.CS
========================================

ğŸ“Œ Chá»©c nÄƒng: Hiá»ƒn thá»‹ dá»± bÃ¡o thá»i tiáº¿t 24h & 5 ngÃ y
ğŸ“Œ Vá»‹ trÃ­: ForecastService.cs

ğŸ”§ CÃ¡c method chÃ­nh:
- Display24HourForecast() - Hiá»ƒn thá»‹ dá»± bÃ¡o 24 giá»
- Display5DayForecast() - Hiá»ƒn thá»‹ dá»± bÃ¡o 5 ngÃ y
- CreateHourCard() - Táº¡o card giá»
- CreateDayCard() - Táº¡o card ngÃ y

ğŸ’¡ CÃ¡ch sá»­ dá»¥ng:
```csharp
var forecastService = new ForecastService();

// Hiá»ƒn thá»‹ dá»± bÃ¡o 24 giá»
forecastService.Display24HourForecast(
    hourlyList, 
    "Â°C", 
    panel24Hours
);

// Hiá»ƒn thá»‹ dá»± bÃ¡o 5 ngÃ y
forecastService.Display5DayForecast(
    dailyList, 
    "Â°C", 
    panel5Days
);
```

========================================
4ï¸âƒ£ CHARTSERVICE.CS
========================================

ğŸ“Œ Chá»©c nÄƒng: Quáº£n lÃ½ biá»ƒu Ä‘á»“ thá»i tiáº¿t
ğŸ“Œ Vá»‹ trÃ­: ChartService.cs

ğŸ”§ CÃ¡c method chÃ­nh:
- ShowTemperatureChart24h() - Biá»ƒu Ä‘á»“ nhiá»‡t Ä‘á»™ 24h
- ShowTemperatureChart5Days() - Biá»ƒu Ä‘á»“ nhiá»‡t Ä‘á»™ 5 ngÃ y
- ShowChart() - Hiá»ƒn thá»‹ biá»ƒu Ä‘á»“
- HideChart() - áº¨n biá»ƒu Ä‘á»“
- ConfigureChart() - Cáº¥u hÃ¬nh biá»ƒu Ä‘á»“

ğŸ’¡ CÃ¡ch sá»­ dá»¥ng:
```csharp
var chartService = new ChartService();

// Hiá»ƒn thá»‹ biá»ƒu Ä‘á»“ 24h
chartService.ShowTemperatureChart24h(
    hourlyList, 
    temperatureChart
);

// Hiá»ƒn thá»‹ biá»ƒu Ä‘á»“ 5 ngÃ y
chartService.ShowTemperatureChart5Days(
    dailyList, 
    temperatureChart
);

// Cáº¥u hÃ¬nh biá»ƒu Ä‘á»“
chartService.ConfigureChart(temperatureChart);
```

========================================
5ï¸âƒ£ MAPSERVICE.CS
========================================

ğŸ“Œ Chá»©c nÄƒng: Quáº£n lÃ½ báº£n Ä‘á»“ thá»i tiáº¿t
ğŸ“Œ Vá»‹ trÃ­: MapService.cs

ğŸ”§ CÃ¡c method chÃ­nh:
- ShowMap() - Hiá»ƒn thá»‹ báº£n Ä‘á»“
- HideMap() - áº¨n báº£n Ä‘á»“
- LoadWindyMap() - Táº£i báº£n Ä‘á»“ Windy
- UpdateMarkerByLocation() - Cáº­p nháº­t marker
- ConfigureMap() - Cáº¥u hÃ¬nh báº£n Ä‘á»“

ğŸ’¡ CÃ¡ch sá»­ dá»¥ng:
```csharp
var mapService = new MapService();

// Hiá»ƒn thá»‹ báº£n Ä‘á»“
mapService.ShowMap(windyView);

// Táº£i báº£n Ä‘á»“ Windy
mapService.LoadWindyMap(21.0285, 105.8542, windyView);

// Cáº­p nháº­t marker
mapService.UpdateMarkerByLocation(21.0285, 105.8542, windyView);

// Cáº¥u hÃ¬nh báº£n Ä‘á»“
mapService.ConfigureMap(windyView);
```

========================================
6ï¸âƒ£ BACKGROUNDSERVICE.CS
========================================

ğŸ“Œ Chá»©c nÄƒng: Quáº£n lÃ½ background thay Ä‘á»•i theo thá»i tiáº¿t
ğŸ“Œ Vá»‹ trÃ­: BackgroundService.cs

ğŸ”§ CÃ¡c method chÃ­nh:
- SetBackground() - Thiáº¿t láº­p ná»n theo thá»i tiáº¿t
- ForceSetBackgroundInLoad() - Force set ná»n trong load
- SetDefaultBackgroundOnStartup() - Set ná»n máº·c Ä‘á»‹nh
- UpdateTextColorByTime() - Cáº­p nháº­t mÃ u chá»¯ theo thá»i gian
- UpdateDetailPanelTextColor() - Cáº­p nháº­t mÃ u chá»¯ panel

ğŸ’¡ CÃ¡ch sá»­ dá»¥ng:
```csharp
var backgroundService = new BackgroundService();

// Thiáº¿t láº­p ná»n theo thá»i tiáº¿t
backgroundService.SetBackground("Clear", 800, mainPanel);

// Force set ná»n trong load
backgroundService.ForceSetBackgroundInLoad(mainPanel);

// Cáº­p nháº­t mÃ u chá»¯ theo thá»i gian
backgroundService.UpdateTextColorByTime(this);

// Cáº­p nháº­t mÃ u chá»¯ panel chi tiáº¿t
backgroundService.UpdateDetailPanelTextColor(detailPanel);
```

========================================
CÃCH TÃCH Há»¢P VÃ€O FORM1.CS
========================================

1. Khai bÃ¡o cÃ¡c service trong Form1:
```csharp
private readonly LocationService locationService = new LocationService();
private readonly WeatherDisplayService weatherDisplayService = new WeatherDisplayService();
private readonly ForecastService forecastService = new ForecastService();
private readonly ChartService chartService = new ChartService();
private readonly MapService mapService = new MapService();
private readonly BackgroundService backgroundService = new BackgroundService();
```

2. Sá»­ dá»¥ng trong cÃ¡c event handler:
```csharp
private async void btnTimKiem_Click(object sender, EventArgs e)
{
    var result = await locationService.SearchLocationAsync(txtSearch.Text);
    if (result.success)
    {
        weatherDisplayService.DisplayWeatherInfo(
            result.location, 
            result.weatherData, 
            isCelsius,
            lblLocation, lblTime, lblTemperature, lblStatus, 
            picWeatherIcon, detailPanel
        );
    }
}

private void btnLuu_Click(object sender, EventArgs e)
{
    locationService.SaveLocation(locationName, lat, lon);
}

private void tabControl_SelectedIndexChanged(object sender, EventArgs e)
{
    if (tabControl.SelectedTab == tabChart)
    {
        chartService.ShowChart(temperatureChart);
    }
    else if (tabControl.SelectedTab == tabMap)
    {
        mapService.ShowMap(windyView);
    }
}
```

========================================
Lá»¢I ÃCH Cá»¦A VIá»†C REFACTOR
========================================

âœ… **TÃ¡ch biá»‡t trÃ¡ch nhiá»‡m**: Má»—i service cÃ³ trÃ¡ch nhiá»‡m riÃªng biá»‡t
âœ… **Dá»… báº£o trÃ¬**: Code Ä‘Æ°á»£c tá»• chá»©c rÃµ rÃ ng, dá»… tÃ¬m vÃ  sá»­a
âœ… **TÃ¡i sá»­ dá»¥ng**: CÃ¡c service cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng á»Ÿ nhiá»u nÆ¡i
âœ… **Dá»… test**: CÃ³ thá»ƒ test tá»«ng service riÃªng biá»‡t
âœ… **Má»Ÿ rá»™ng**: Dá»… dÃ ng thÃªm tÃ­nh nÄƒng má»›i vÃ o tá»«ng service
âœ… **Giáº£m Ä‘á»™ phá»©c táº¡p**: Form1.cs giá» chá»‰ cÃ²n xá»­ lÃ½ UI events

========================================
GHI CHÃš QUAN TRá»ŒNG
========================================

âš ï¸ **Data Types**: CÃ¡c service sá»­ dá»¥ng data types tá»« DichVuThoiTiet.cs:
- ThoiTietHienTai (thay vÃ¬ OneCallResponse)
- List<DuBaoTheoGioItem> (thay vÃ¬ HourlyWeather[])
- List<DuBaoNgayItem> (thay vÃ¬ DailyWeather[])
- ViTri (thay vÃ¬ GeocodingResult)

âš ï¸ **File Storage**: LocationService sá»­ dá»¥ng file txt thay vÃ¬ database

âš ï¸ **API Integration**: Táº¥t cáº£ service Ä‘á»u sá»­ dá»¥ng DichVuThoiTiet class

========================================
